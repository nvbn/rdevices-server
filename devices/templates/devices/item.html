{% extends "base.html" %}

{% load bootstrap %}

{% block content %}
    <div class='span12 well'>
        <h2>Device: {{ device }}</h2>
        <p>
            <a href="{% url 'devices_change' device.slug %}">Edit</a> /
            <a href="{% url 'devices_delete' device.slug %}">delete</a>
        </p>
        <p>{{ device.description }}</p>
        {% if device.methods.count %}
            <ul>
                {% for pair in methods %}
                    <li>
                        <strong>{{ pair.method }}</strong>
                        <p>{{ pair.method.description }}</p>
                        {% include "devices/includes/call_form.html" with form=pair.form device_method=pair.method inline=True %}
                        <ul>
                            {% for call in pair.method.calls.all %}
                                <li>
                                    <p>State: {{ call.get_state }}</p>
                                    {% if call.request %}
                                        <p>Request:</p>
<pre class='prettyprint linenums'>
{{ call.pretty_request }}
</pre>
                                    {% endif %}
                                    {% if call.response %}
                                        <p>Response:</p>
<pre class='prettyprint linenums'>
{{ call.pretty_response }}
</pre>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>This device doesn't register methods.</p>
        {% endif %}
    </div>
{% endblock %}
